{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-index-tsx","path":"/blog/article-1/","result":{"pageContext":{"article":{"banner":{"alt":"Effortlessly Dockerize Your PHP Laravel App: A Step-by-Step Guide","caption":"Photo by <u><a href=\"https://unsplash.com/photos/Nc5Q_CEcY44\">Florian Olivo</a></u>","src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAMABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAgBBQcK/8QAFgEBAQEAAAAAAAAAAAAAAAAABAMF/9oADAMBAAIQAxAAAAGgfbDYzWsKc6gSn//EABwQAAEEAwEAAAAAAAAAAAAAAAUCAwQGAQcRFf/aAAgBAQABBQKX7b5JYWFyUVrgVwE0mRZNg2UvX0mEYfI//8QAIREAAgECBgMAAAAAAAAAAAAAAhEBAwQAEhMhQVEVMUL/2gAIAQMBAT8BvwqEdna0ygY04KPkc1dNreYyiHt7td48JxNyT5QQnt3M4//EACQRAAEDAgQHAAAAAAAAAAAAAAECAxIEEQAhMVEFExVhcYKx/9oACAECAQE/AeHuNpZrKhxJUeYrZRi0Ii0jYGUjl2Jz066k6U9va+3j5j//xAAkEAACAgIBAwQDAAAAAAAAAAABAgMEBRIRABQhBhMVMSMzUv/aAAgBAQAGPwL0/QtJcgqZXJVIPja4idaNUfkkNtK2kZWsI4FtSbRwtcsPwzKsaESU6FUW01EDiJBqSyqzOABGy6c+5uhBHJ456FPI5jA4q0UWZ6s96jQc7+Pd7eSSNwrlTqzLyQPs9ZWeTYvQx1eKtwxUILU0kkx8edmNaIcgjwvHWOp4mz2vyuNzEstvje3XalHXMXZySFkh/a2ztFJJ9aOhHVma0Xt2JHLS2bTvPYmck8vLM5LyOf6Yk9f/xAAZEAEBAQEBAQAAAAAAAAAAAAABESEAMVH/2gAIAQEAAT8hz3hgaTLIeL2IUy6MsqMdXJnAoJgwyTPUp8AeWsHfAvXfVH2Lz9UTV41EvnC6h+yFfZESBQAWAH//2gAMAwEAAgADAAAAEG//AP/EABgRAQEBAQEAAAAAAAAAAAAAAAERIQCR/9oACAEDAQE/EFa4AGk0ikIwgATUGqYIKEqCJVlV9e//xAAZEQEBAQEBAQAAAAAAAAAAAAABESEAMUH/2gAIAQIBAT8QVjxuBQgKlkUUOOGiJcGwWKkLp8ed/8QAFxABAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAQABPxDjsNAc1E3SoFNB3BRjIAKjE4oCGbEB6bcVHYSn7HfXYLzA7EoSTzwImANVK4JiSCLZAcQTH//Z"},"images":{"fallback":{"src":"/static/1d7b0d0d6e7b145f968f65bfc40a39b4/91671/kelly-sikkema-Hl3LUdyKRic-unsplash.jpg","srcSet":"/static/1d7b0d0d6e7b145f968f65bfc40a39b4/7e3b4/kelly-sikkema-Hl3LUdyKRic-unsplash.jpg 165w,\n/static/1d7b0d0d6e7b145f968f65bfc40a39b4/47f88/kelly-sikkema-Hl3LUdyKRic-unsplash.jpg 330w,\n/static/1d7b0d0d6e7b145f968f65bfc40a39b4/91671/kelly-sikkema-Hl3LUdyKRic-unsplash.jpg 660w,\n/static/1d7b0d0d6e7b145f968f65bfc40a39b4/5aaff/kelly-sikkema-Hl3LUdyKRic-unsplash.jpg 1320w","sizes":"(min-width: 660px) 660px, 100vw"},"sources":[{"srcSet":"/static/1d7b0d0d6e7b145f968f65bfc40a39b4/322ad/kelly-sikkema-Hl3LUdyKRic-unsplash.webp 165w,\n/static/1d7b0d0d6e7b145f968f65bfc40a39b4/de3b3/kelly-sikkema-Hl3LUdyKRic-unsplash.webp 330w,\n/static/1d7b0d0d6e7b145f968f65bfc40a39b4/2b2b5/kelly-sikkema-Hl3LUdyKRic-unsplash.webp 660w,\n/static/1d7b0d0d6e7b145f968f65bfc40a39b4/e36a7/kelly-sikkema-Hl3LUdyKRic-unsplash.webp 1320w","type":"image/webp","sizes":"(min-width: 660px) 660px, 100vw"}]},"width":660,"height":400}}}},"body":"<p>Dockerizing a PHP Laravel application can streamline your development process, ensuring consistency across environments and simplifying deployment. This guide is a practical walk-through of Dockerizing a fresh PHP Laravel application, ideal for beginners and seasoned developers alike.</p>\n<p><strong>Tested on:</strong></p>\n<ul>\n<li>Mac M2</li>\n<li>macOS: Ventura 13.5.2</li>\n<li>Docker: 4.22.1</li>\n</ul>\n<p><strong>Requisite:</strong></p>\n<ul>\n<li>Docker</li>\n</ul>\n<h2>Introduction</h2>\n<p>Docker offers a world of convenience for developers. By containerizing your PHP Laravel application, you're setting up a development environment that's easy to share and deploy, free from the \"it works on my machine\" syndrome. In this guide, we'll start from scratch, setting up a Laravel application and then Dockerizing it for consistent development and deployment.</p>\n<h2>Preparing Your Environment</h2>\n<p>Before diving into Docker, let's set up our local environment. This will be useful to understand the dependencies that we will later encapsulate within our Docker container.</p>\n<p>If you prefer not to install these dependencies locally, feel free to clone the repository <a href=\"https://github.com/aprilrieger/larvel-app\">here</a> and follow along.</p>\n<h3>Install Dependencies on a Mac</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> <span class=\"token function\">docker</span>\nbrew <span class=\"token function\">install</span> <span class=\"token function\">composer</span>\nbrew <span class=\"token function\">install</span> php@8.2\n<span class=\"token function\">composer</span> global require laravel/installer</code></pre></div>\n<h2>Create Your New PHP Laravel Project</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">composer</span> create-project --prefer-dist laravel/laravel laravel-app</code></pre></div>\n<h2>Start the Apache Server &#x26; Navigate to your project directory and start the server:</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> laravel-app\nphp artisan serve</code></pre></div>\n<p>Now, you can visit <a href=\"http://localhost:8000/\">http://localhost:8000/</a> in your browser.</p>\n<p>For Windows or Linux users, check out this helpful documentation on installing Laravel: <a href=\"https://kinsta.com/knowledgebase/install-laravel/#how-to-install-laravel-on-macos\">Kinsta's Laravel Installation Guide</a>.</p>\n<h2>Dockerizing the Laravel Application</h2>\n<p>With our local setup complete, we now have a clear understanding of what our Docker container needs. Let's proceed to Dockerize the application.</p>\n<h2>Crafting the Dockerfile</h2>\n<p>Our Dockerfile will define the environment our Laravel app needs to run. We'll use PHP with Apache as our base image and install necessary system dependencies and PHP extensions.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Use PHP with Apache as the base image</span>\nFROM php:8.2-apache as web\n\n<span class=\"token comment\"># Install Additional System Dependencies</span>\nRUN <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> <span class=\"token punctuation\">\\</span>\n    libzip-dev <span class=\"token punctuation\">\\</span>\n    <span class=\"token function\">zip</span>\n\n<span class=\"token comment\"># Clear cache</span>\nRUN <span class=\"token function\">apt-get</span> clean <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/lib/apt/lists/*\n\n<span class=\"token comment\"># Enable Apache mod_rewrite for URL rewriting</span>\nRUN a2enmod rewrite\n\n<span class=\"token comment\"># Install PHP extensions</span>\nRUN docker-php-ext-install pdo_mysql <span class=\"token function\">zip</span>\n\n<span class=\"token comment\"># Configure Apache DocumentRoot to point to Laravel's public directory</span>\n<span class=\"token comment\"># and update Apache configuration files</span>\nENV <span class=\"token assign-left variable\">APACHE_DOCUMENT_ROOT</span><span class=\"token operator\">=</span>/var/www/html/public\nRUN <span class=\"token function\">sed</span> <span class=\"token parameter variable\">-ri</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">'s!/var/www/html!${APACHE_DOCUMENT_ROOT}!g'</span> /etc/apache2/sites-available/*.conf\nRUN <span class=\"token function\">sed</span> <span class=\"token parameter variable\">-ri</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">'s!/var/www/!${APACHE_DOCUMENT_ROOT}!g'</span> /etc/apache2/apache2.conf /etc/apache2/conf-available/*.conf\n\n<span class=\"token comment\"># Copy the application code</span>\nCOPY <span class=\"token builtin class-name\">.</span> /var/www/html\n\n<span class=\"token comment\"># Set the working directory</span>\nWORKDIR /var/www/html\n\n<span class=\"token comment\"># Install composer</span>\nRUN <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-sS</span> https://getcomposer.org/installer <span class=\"token operator\">|</span> php -- --install-dir<span class=\"token operator\">=</span>/usr/local/bin <span class=\"token parameter variable\">--filename</span><span class=\"token operator\">=</span>composer\n\n<span class=\"token comment\"># Install project dependencies</span>\nRUN <span class=\"token function\">composer</span> <span class=\"token function\">install</span>\n\n<span class=\"token comment\"># Set permissions</span>\nRUN <span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache</code></pre></div>\n<h2>Setting Up docker-compose with MySQL</h2>\n<p>Now, let's define our docker-compose.yml file. This file will set up our Laravel application and a MySQL database as microservices.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">version: <span class=\"token string\">'3.8'</span>\n\nservices:\n  web:\n    image: app-name:latest\n    build:\n      target: web\n      context: <span class=\"token builtin class-name\">.</span>\n    env_file:\n      - .env\n    ports:\n      - <span class=\"token string\">\"8000:80\"</span>\n    volumes:\n      - .:/var/www/html\n    depends_on:\n      - db\n  \n  db:\n    platform: <span class=\"token string\">\"linux/amd64\"</span>\n    image: mysql:5.7\n    env_file:\n      - .env\n    environment:\n      MYSQL_ROOT_PASSWORD: root\n      MYSQL_DATABASE: <span class=\"token variable\">${DB_DATABASE}</span>\n      MYSQL_USER: <span class=\"token variable\">${DB_USERNAME}</span>\n      MYSQL_PASSWORD: <span class=\"token variable\">${DB_PASSWORD}</span>\n    ports:\n      - <span class=\"token string\">\"3306:3306\"</span>\n    volumes:\n      - dbdata:/var/lib/mysql\n\nvolumes:\n  dbdata:</code></pre></div>\n<h2>Building and Running the Docker Containers</h2>\n<p>With our Dockerfile and docker-compose ready, it's time to build and run our containers.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> compose build\n<span class=\"token function\">docker</span> compose up <span class=\"token parameter variable\">-d</span></code></pre></div>\n<p>Navigate to <a href=\"http://localhost:8000/\">http://localhost:8000/</a> in your browser to see your Dockerized Laravel app in action.</p>\n<p>For a visual guide on Dockerization, check out this helpful video: <a href=\"https://www.youtube.com/watch?v=uYhowDSkwyk\">Dockerization Tutorial</a>.</p>\n<h2>Conclusion</h2>\n<p>Dockerizing a PHP Laravel application is a straightforward process that offers significant benefits for development and deployment. Remember, the key to mastering Docker is consistent practice and exploration. Don’t hesitate to experiment with different configurations and setups.</p>\n<p>Happy Dockerizing!</p>","categories":["Docker","PHP","Laravel","Tutorial"],"date":"December 17, 2023","description":"Designed for both beginners and experienced developers, this step-by-step tutorial demystifies the process of containerizing your Laravel project.","id":"125e2181-1ae3-541c-be56-37ec1ebf454d","keywords":["Docker","PHP","Laravel","Tutorial","Blog"],"slug":"/blog/article-1/","title":"Effortlessly Dockerize Your PHP Laravel App: A Step-by-Step Guide.","readingTime":{"text":"4 min read"}},"listingPagePath":"/blog"}},"staticQueryHashes":["3262260831","948380417"],"slicesMap":{}}